// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Province {
  id                 Int               @id @default(autoincrement())
  name               String
  capital            String
  slug               String
  language           String[]
  topCities          String[]          @map("top_cities")
  immigrationRanking Int               @map("immigration_ranking")
  imageUrl           String            @map("image_url")
  flagUrl            String            @map("flag_url")
  overview           ProvinceOverview?
  city               City[]
  immigration        Immigration[]
  study              Study[]

  @@map("Provinces")
}

model ProvinceOverview {
  id         Int             @id @default(autoincrement())
  province   Province        @relation(fields: [provinceId], references: [id])
  provinceId Int             @unique @map("province_id")
  bannerUrl  String          @default("") @map("banner_url")
  scores     ProvinceScore[] @relation("scores")
}

model ProvinceScore {
  id         Int              @id @default(autoincrement())
  name       String
  score      Float
  emoji      String
  overview   ProvinceOverview @relation("scores", fields: [overviewId], references: [id])
  overviewId Int              @map("overview_id")

  @@map("ProvinceScores")
}

model City {
  id           Int      @id @default(autoincrement())
  name         String
  slug         String
  language     String[]
  imageUrl     String   @map("image_url")
  costOfLiving Float    @map("cost_of_living")
  overallScore Float    @map("overall_score")
  province     Province @relation(fields: [provinceId], references: [id])
  provinceId   Int
  Study        Study[]

  @@map("cities")
}

model Immigration {
  id          Int      @id @default(autoincrement())
  name        String
  description String
  province    Province @relation(fields: [provinceId], references: [id])
  provinceId  Int
}

model Study {
  id          Int      @id @default(autoincrement())
  name        String
  description String
  province    Province @relation(fields: [provinceId], references: [id])
  provinceId  Int
  city        City     @relation(fields: [cityId], references: [id])
  cityId      Int
}
